{% extends 'main/base.html' %}
{% block title %}Update Purchase{% endblock %}
{% block content %}
<div class="page-header"><div class="container"><h1>Update Car Purchase</h1></div></div>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card p-4">
                <p><strong>Customer:</strong> {{ purchase.user.username }}</p>
                <p><strong>Car:</strong> {{ purchase.car.company.name }} {{ purchase.car.model }}</p>
                <p><strong>Price:</strong> ${{ purchase.total_price }}</p>
                <p><strong>Payment Method:</strong> {{ purchase.get_payment_method_display }}</p>
                <p><strong>Purchase Date:</strong> {{ purchase.purchase_date|date:"Y-m-d H:i" }}</p>
                <hr>
                <form method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select name="status" class="form-control" style="border-radius:10px;">
                            <option value="pending" {% if purchase.status == 'pending' %}selected{% endif %}>Pending Payment</option>
                            <option value="paid" {% if purchase.status == 'paid' %}selected{% endif %}>Payment Confirmed</option>
                            <option value="confirmed" {% if purchase.status == 'confirmed' %}selected{% endif %}>Purchase Confirmed</option>
                            <option value="cancelled" {% if purchase.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                        </select>
                    </div>
                    <button type="submit" class="btn w-100" style="background:#e94560;color:white;border-radius:10px;padding:12px;">Update Status</button>
                </form>
                <a href="{% url 'main:company_car_purchases' %}" class="btn w-100 mt-2" style="border-radius:10px;padding:12px;">Cancel</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}